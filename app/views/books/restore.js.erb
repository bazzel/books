var el = document.getElementById('<%= @book.dom_id %>');

if (el) {
  var isExpanded      = el.classList.contains('show');
  var restoreEl       = document.createElement('div');
  var collapsedHTML   = '<%= j render(partial: 'books/book', object: @book, locals: { parent: 'books' }) %>';
  var expandedHTML    = '<%= j render(partial: 'books/book', object: @book, locals: { show: true, parent: 'books' }) %>';

  restoreEl.innerHTML = isExpanded ? expandedHTML : collapsedHTML;
  el.replaceWith(restoreEl.firstChild);
}

var snackbar       = document.createElement('div');
snackbar.innerHTML = '<%= j render(Material::Snackbar.new(flash: flash)) %>';
document.body.appendChild(snackbar.firstChild);
